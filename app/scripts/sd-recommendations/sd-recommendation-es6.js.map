{"version":3,"sources":["sd-recommendation.es6"],"names":[],"mappings":"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","file":"sd-recommendation-es6.js","sourcesContent":["'use strict';\n\n// encapsulates the functionalities of the directive\nclass RecommendationDirectiveController {\n    constructor(document, $scope, recommendationsFty){\n        this.filterTags = document.querySelector(\".tags\");\n        this.filterInput = document.querySelector(\".filterInput\");\n        this.recommendationsFty = recommendationsFty;\n        \n        this.document = document;\n        this.scope = $scope;\n        $scope.filterLabel = true;\n        $scope.filterInput = false;\n        \n        // needs to be assigned angular style. Otherwise it would be needed to assign those functions explicitly after creating the object.\n        $scope.labelClick = function(){\n            $scope.filterLabel = false;\n            $scope.filterInput = true;\n            filterInput.focus();\n        }\n        \n        $scope.filterInputBlur = function(){\n            $scope.filterLabel = true;\n            $scope.filterInput = false;\n        }\n        var that = this;\n        this.tagClick  = function(elem, evt){\n            var clickedTag = elem.target;\n            var content = clickedTag.childNodes[0].data;\n            clickedTag.innerHTML  = \"\";\n\n            var inputTag = document.createElement(\"input\");\n            inputTag.type = \"text\";\n            inputTag.value = content;\n            angular.element(inputTag).bind(\"keydown keypress\", function (event) {\n                // checks if enter was pressed\n                if(event.which === 13) {\n                    addFilter();\n\n                    event.preventDefault();\n                }\n            });\n            \n            inputTag.onblur = function(){\n                addFilter();\n            };\n            \n            var addFilter = function(){\n                if(inputTag.value === \"\"){\n                    var parent = clickedTag.parentElement;\n                    parent.removeChild(clickedTag);\n                    $scope.$apply(recommendationsFty.search.splice(that.findPosInSearchByString(content),1));\n                }\n                else  {\n                    clickedTag.innerHTML = inputTag.value;\n                    // adds a delete button beside the filter\n                    var filterDelete = document.createElement(\"span\");\n                    filterDelete.className = \"filter-remove\";\n                    filterDelete.innerHTML = \"X\";\n                    filterDelete.onclick = that.dropFilter;\n                    clickedTag.appendChild(filterDelete);\n                    \n                    $scope.$apply(recommendationsFty.search[that.findPosInSearchByString(content)] = inputTag.value);\n                }\n            };\n            \n            clickedTag.appendChild(inputTag);\n        }\n        \n        this.dropFilter = function(elem){\n            var parent = elem.target.parentElement.parentElement;\n            var content = elem.target.parentElement.childNodes[0].data;\n            parent.removeChild(elem.target.parentElement);\n            $scope.$apply(recommendationsFty.search.splice(that.findPosInSearchByString(content),1));\n        }\n    }\n        \n    findPosInSearchByString(str){\n        for(var i = 0; i < this.recommendationsFty.search.length; i++){\n            if(this.recommendationsFty.search[i] === str){\n                return i;\n            }\n        }\n\n        return undefined;\n    }\n}\n\nvar sdr = angular.module('privantAngularApp');\n\nsdr.factory('recommendationsFty', function($http){\n    var factory = {};\n    \n    factory.getData = function(func){\n        $http.get('http://localhost:10000/recommendations').success(func);\n    };\n        \n    factory.search = [];\n    \n    return factory;\n});\n\nsdr.controller('recommendationsCtrl', function($scope, recommendationsFty) {    \n    recommendationsFty.getData(function(data){\n        $scope.data = data;\n    });\n});\n\nsdr.directive('sdRecommendations', function(recommendationsFty) {\n  return {\n    templateUrl: 'scripts/sd-recommendations/sd-recommendation.html',\n    link: function($scope, elem, attr){\n        var ctrl = new RecommendationDirectiveController(document, $scope, recommendationsFty);\n                \n        // binds a keydown action on the filter input element\n        angular.element(ctrl.filterInput).bind(\"keydown keypress\", function (event) {\n            // checks if enter was pressed\n            if(event.which === 13) {\n                // adds the new filter as a span and makes the input text invisible\n                var newFilter = document.createElement(\"span\");\n                newFilter.className = \"tag\";\n                angular.element(newFilter).bind('click',ctrl.tagClick);\n                newFilter.innerHTML = filterInput.value;\n                \n                // adds a delete button beside the filter\n                var filterDelete = document.createElement(\"span\");\n                filterDelete.className = \"filter-remove\";\n                filterDelete.innerHTML = \"X\";\n                filterDelete.onclick = ctrl.dropFilter;\n                newFilter.appendChild(filterDelete);\n                \n                ctrl.filterInput.blur();\n                ctrl.filterTags.appendChild(newFilter);\n                                \n                $scope.$apply(recommendationsFty.search.push(filterInput.value));\n                ctrl.filterInput.value = \"\";\n                \n                event.preventDefault();\n            }\n        });\n    }\n  };\n});\n\nsdr.filter('filterRecommendations',function(recommendationsFty){\n    return function(input) {\n        if(input !== undefined){\n            var filtered = [];\n\n            for(var i = 0; i < input.length; i++){\n                var added = false;\n                for(var k = 0; k < recommendationsFty.search.length && !added; k++){\n                    // filters tags\n                    for(var j = 0; j < input[i].event.tags.length && !added; j++){\n                        if(input[i].event.tags[j] === recommendationsFty.search[k]){\n                            filtered.push(input[i]);\n                            added = true;\n                        }\n                    }\n\n                    if(input[i].event.date === recommendationsFty.search[k] && !added){\n                        filtered.push(input[i]);\n                        added = true;\n                    }\n\n                    if(input[i].event.description.contains(recommendationsFty.search[k]) && !added){\n                        filtered.push(input[i]);\n                        added = true;\n                    }\n\n                    if(input[i].event.city === recommendationsFty.search[k] && !added){\n                        filtered.push(input[i]);\n                        added = true;\n                    }\n\n                    if(input[i].event.title.contains(recommendationsFty.search[k]) && !added){\n                        filtered.push(input[i]);\n                        added = true;\n                    }\n                }\n            }\n\n            if(recommendationsFty.search.length === 0){\n                return input;\n            }\n            else {\n                return filtered;\n            }\n        }\n    };\n});\n\n// fuck those browsers not having String.contains\nif(!('contains' in String.prototype)) {\n    String.prototype.contains = function(str) {\n        return -1 !== String.prototype.indexOf.call(this, str);\n    };\n}"]}